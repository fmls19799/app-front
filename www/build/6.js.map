{"version":3,"sources":["../../src/models/product.ts","../../src/pages/product-detail/product-detail.module.ts","../../src/pages/product-detail/product-detail.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { User } from \"./user\";\n\nexport class Product {\n    _id?: string; // CUANDO LO CREO NO TIENE ID???\n    \n    name: string;\n    icon?: string;\n    description: string;\n    price: number;\n    type: string;\n    photos: Array<File> = [];\n    owner?: User;\n    rentOrBuy: string;\n    numberOfLikes?: number;\n\n    km: number;\n    randomHeight?: any;\n    // opacity?: boolean; // NO SIEMPRE TENEMOS OPACTIDAD???\n    \n    \n    // asFormData(): any{         \n    //     const data = new FormData();\n        \n    //     data.append('name', this.name);\n    //     data.append('icon', this.icon);\n    //     data.append('description', this.description);\n    //     data.append('price', (this.price).toString());\n    //     data.append('type', this.type);\n        \n    //     for (const photo of this.photos) {\n    //         data.append('photos', photo);\n    //     }\n    //     return data;\n    // }\n    \n    \n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/product.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProductDetailPage } from './product-detail';\nimport { CustomComponentsModule } from './../../components/components.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ProductDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProductDetailPage),\n    TranslateModule.forChild(),\n    CustomComponentsModule,\n  ],\n})\nexport class ProductDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/product-detail/product-detail.module.ts","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { Product } from './../../models/product';\nimport { ProductsProvider } from './../../providers/products/products';\nimport { AuthProvider } from './../../providers/auth/auth';\nimport { User } from './../../models/user';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subscription } from 'rxjs';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-product-detail',\n  templateUrl: 'product-detail.html',\n})\nexport class ProductDetailPage implements OnInit, OnDestroy {\n  \n  liking: boolean = false;\n  user: User;\n  comingAfterCreateProduct: boolean;\n  productToShow: Product = new Product();\n  subscriptions = new Subscription();\n  \n  \n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private productsProvider: ProductsProvider,\n    private auth: AuthProvider,\n    private toastCtrl: ToastController,\n    private translate: TranslateService) {\n    }\n    \n    ngOnInit() {\n  \n      this.getProductById(this.navParams.data._id); // NO HACE FALTA PUEDO CARGA EL PRODUCT AL PASAR DEL HOME Y SOLO LLAMAR PARA QUE ME DE LOS LIKES???\n      this.getSuscription();\n      this.liking = false;\n      this.user = this.auth.user;\n    }\n    \n    getSuscription() {\n      let subscription = this.productsProvider.productDetailChanges().subscribe((product: Product) => {\n        this.productToShow = product;\n      })\n      this.subscriptions.add(subscription);\n    }\n    \n    getProductById(id: string) {\n      this.productsProvider.getProductById(id).subscribe((data) => {\n        this.liking = data.liking;        \n        this.productToShow = data.product;\n        console.log(this.productToShow);\n        console.log('liking:', this.liking);\n        \n      },\n      (error) => {\n        this.translator(error);\n      })\n    }\n    \n    like() {\n      // this.likeOrUnlike();\n      if (this.productToShow.owner.id !== this.user.id) {\n        this.liking = !this.liking;\n        this.likeOrUnlike();\n      } else{\n        this.translator('YOU_CANNOT_LIKE_YOUR_OWN_PRODUCT');\n      }\n    }\n    \n    // AUNQUE SI SE CAMBNIE EL ICONO DE FORMA LOCAL DEBO NITIFICAR CAMBIOS PARA QUE EL PRODUCT SE VEA LOS LIKES EN TIEMPO REAL???\n    likeOrUnlike() {\n      if (this.liking) {\n        console.log('like');\n        \n        this.productsProvider.likeProduct(this.productToShow).subscribe((product: Product) => {\n          this.productToShow = product;\n        },\n        (error) => {\n          // this.translator(error);\n        })\n      } else {\n        console.log('unlike');\n        \n        this.productsProvider.unlikeProduct(this.productToShow).subscribe((product: Product) => { \n          this.productToShow = product;\n        },\n        (error) => {\n          // this.translator(error);\n        })\n      }\n    }\n    \n    translator(message: string) {\n      this.translate.get(message).subscribe((data: string) => {\n        this.showToast(data);\n      })\n    }\n    \n    showToast(data: string) {\n      this.toastCtrl.create({\n        message: data,\n        duration: 2000,\n        position: 'top',\n      }).present();\n    }\n    \n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n  }\n  \n\n\n// WEBPACK FOOTER //\n// ./src/pages/product-detail/product-detail.ts"],"sourceRoot":""}